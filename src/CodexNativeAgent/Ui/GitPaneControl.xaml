<UserControl x:Class="CodexNativeAgent.Ui.GitPaneControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Transparent">
                            <Border x:Name="GitInspectorPanel"
                                    MinWidth="280"
                                    MaxWidth="760"
                                    Margin="0"
                                    Padding="10"
                                    CornerRadius="12"
                                    Background="{DynamicResource SurfaceMutedBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    Visibility="Collapsed">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,8">
                                        <StackPanel DockPanel.Dock="Left">
                                            <TextBlock Text="Git"
                                                       FontSize="14"
                                                       FontWeight="SemiBold"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock x:Name="LblGitPanelState"
                                                       Text="Open the Git panel to inspect the current repo."
                                                       Margin="0,2,0,0"
                                                       Foreground="{DynamicResource TextTertiaryBrush}"
                                                       FontSize="11" />
                                        </StackPanel>

                                        <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                                            <Button x:Name="BtnGitPanelRefresh"
                                                    Style="{StaticResource ButtonBaseStyle}"
                                                    Content="Refresh"
                                                    Height="28"
                                                    Padding="10,3"
                                                    Margin="0,0,6,0" />
                                            <Button x:Name="BtnGitPanelClose"
                                                    Style="{StaticResource ButtonBaseStyle}"
                                                    Width="28"
                                                    Height="28"
                                                    Padding="0"
                                                    ToolTip="Close Git panel">
                                                <TextBlock Text="&#xE711;"
                                                           FontFamily="Segoe MDL2 Assets"
                                                           FontSize="12"
                                                           TextAlignment="Center"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Center" />
                                            </Button>
                                        </StackPanel>
                                    </DockPanel>

                                    <Border Grid.Row="1"
                                            Margin="0,0,0,8"
                                            Padding="10,8"
                                            CornerRadius="10"
                                            Background="{DynamicResource SurfaceBrush}"
                                            BorderBrush="{DynamicResource BorderBrush}"
                                            BorderThickness="1">
                                        <StackPanel>
                                            <TextBlock x:Name="LblGitPanelRepoName"
                                                       Text="No repository selected"
                                                       FontWeight="SemiBold"
                                                       Foreground="{DynamicResource TextPrimaryBrush}"
                                                       TextTrimming="CharacterEllipsis" />
                                            <TextBlock x:Name="LblGitPanelRepoPath"
                                                       Text=""
                                                       Margin="0,2,0,0"
                                                       FontSize="11"
                                                       Foreground="{DynamicResource TextTertiaryBrush}"
                                                       TextTrimming="CharacterEllipsis" />
                                            <WrapPanel Margin="0,8,0,0">
                                                <Border CornerRadius="8"
                                                        Padding="8,4"
                                                        Margin="0,0,6,6"
                                                        Background="{DynamicResource SurfaceContrastBrush}"
                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                        BorderThickness="1">
                                                    <TextBlock x:Name="LblGitPanelBranch"
                                                               Text="branch: -"
                                                               FontSize="11"
                                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                                </Border>
                                                <Border CornerRadius="8"
                                                        Padding="8,4"
                                                        Margin="0,0,6,6"
                                                        Background="{DynamicResource SurfaceContrastBrush}"
                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                        BorderThickness="1">
                                                    <TextBlock x:Name="LblGitPanelStatusSummary"
                                                               Text="status: -"
                                                               FontSize="11"
                                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                                </Border>
                                            </WrapPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                                <TextBlock x:Name="LblGitPanelAddedSummary"
                                                           Text=""
                                                           Visibility="Collapsed"
                                                           Foreground="{DynamicResource SuccessBrush}"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Margin="0,0,10,0" />
                                                <TextBlock x:Name="LblGitPanelRemovedSummary"
                                                           Text=""
                                                           Visibility="Collapsed"
                                                           Foreground="{DynamicResource DangerBrush}"
                                                           FontSize="11"
                                                           FontWeight="SemiBold" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <Border Grid.Row="2"
                                            Margin="0,0,0,8"
                                            Padding="4"
                                            CornerRadius="10"
                                            Background="{DynamicResource SurfaceBrush}"
                                            BorderBrush="{DynamicResource BorderBrush}"
                                            BorderThickness="1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Button x:Name="BtnGitTabChanges"
                                                    Grid.Column="0"
                                                    Style="{StaticResource ButtonBaseStyle}"
                                                    Content="Changes"
                                                    Margin="0,0,4,0"
                                                    Padding="8,4"
                                                    Height="28" />
                                            <Button x:Name="BtnGitTabHistory"
                                                    Grid.Column="1"
                                                    Style="{StaticResource ButtonBaseStyle}"
                                                    Content="History"
                                                    Margin="0,0,4,0"
                                                    Padding="8,4"
                                                    Height="28" />
                                            <Button x:Name="BtnGitTabBranches"
                                                    Grid.Column="2"
                                                    Style="{StaticResource ButtonBaseStyle}"
                                                    Content="Branches"
                                                    Padding="8,4"
                                                    Height="28" />
                                        </Grid>
                                    </Border>

                                    <Grid Grid.Row="3">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>

                                        <Grid x:Name="GitPanelLoadingOverlay"
                                              Grid.RowSpan="2"
                                              Panel.ZIndex="20"
                                              Visibility="Collapsed"
                                              Background="#44000000">
                                            <Border Width="280"
                                                    MaxWidth="360"
                                                    Padding="12,10"
                                                    CornerRadius="10"
                                                    Style="{x:Null}"
                                                    Background="{DynamicResource SurfaceBrush}"
                                                    BorderBrush="{DynamicResource BorderBrush}"
                                                    BorderThickness="1"
                                                    Effect="{x:Null}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center">
                                                <StackPanel>
                                                    <ProgressBar Height="6"
                                                                 IsIndeterminate="True"
                                                                 Foreground="{DynamicResource AccentBrush}"
                                                                 Background="{DynamicResource SurfaceContrastBrush}" />
                                                    <TextBlock x:Name="LblGitPanelLoading"
                                                               Text="Loading repository..."
                                                               Margin="0,8,0,0"
                                                               FontSize="11"
                                                               Foreground="{DynamicResource TextSecondaryBrush}"
                                                               TextAlignment="Center" />
                                                </StackPanel>
                                            </Border>
                                        </Grid>

                                        <Grid Grid.Row="1">
                                                <Grid x:Name="GitTabChangesView">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition x:Name="GitChangesWorkingTreeRow" Height="180" MinHeight="110" />
                                                    <RowDefinition x:Name="GitChangesDividerRow" Height="18" />
                                                    <RowDefinition x:Name="GitChangesDiffRow" Height="*" MinHeight="220" />
                                                </Grid.RowDefinitions>

                                                <TextBlock Grid.Row="0"
                                                           Text="Working Tree"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />

                                                <Border Grid.Row="1"
                                                        MinHeight="110"
                                                        Margin="0,6,0,0"
                                                        Padding="2"
                                                        CornerRadius="10"
                                                        Background="{DynamicResource SurfaceBrush}"
                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                        BorderThickness="1">
                                                    <ListBox x:Name="LstGitPanelChanges"
                                                             BorderThickness="0"
                                                             Background="Transparent"
                                                             HorizontalContentAlignment="Stretch"
                                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                             ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                             ToolTip="Double-click a file to open it in VS Code">
                                                        <ListBox.Resources>
                                                            <Style TargetType="ListBoxItem">
                                                                <Setter Property="Padding" Value="0" />
                                                                <Setter Property="Margin" Value="0,0,0,4" />
                                                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                                                <Setter Property="Background" Value="Transparent" />
                                                                <Setter Property="BorderThickness" Value="0" />
                                                                <Setter Property="Cursor" Value="Hand" />
                                                            </Style>
                                                        </ListBox.Resources>
                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border x:Name="GitChangeRowChrome"
                                                                        Padding="8,6"
                                                                        CornerRadius="8"
                                                                        Background="{DynamicResource SurfaceMutedBrush}"
                                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                                        BorderThickness="1">
                                                                    <Grid VerticalAlignment="Center">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="*" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <Grid Grid.Column="0"
                                                                              Width="18"
                                                                              Height="18"
                                                                              Margin="0,0,8,0"
                                                                              VerticalAlignment="Center">
                                                                            <Image Source="{Binding FileIconSource}"
                                                                                   Width="16"
                                                                                   Height="16"
                                                                                   Stretch="Uniform"
                                                                                   SnapsToDevicePixels="True"
                                                                                   Visibility="{Binding FileIconVisibility}"
                                                                                   HorizontalAlignment="Center"
                                                                                   VerticalAlignment="Center" />
                                                                            <TextBlock Text="&#xE8A5;"
                                                                                       FontFamily="Segoe MDL2 Assets"
                                                                                       FontSize="10"
                                                                                       Foreground="{DynamicResource TextTertiaryBrush}"
                                                                                       Visibility="{Binding FileIconFallbackVisibility}"
                                                                                       HorizontalAlignment="Center"
                                                                                       VerticalAlignment="Center"
                                                                                       LineHeight="10" />
                                                                        </Grid>

                                                                        <Grid Grid.Column="1"
                                                                              MinWidth="0"
                                                                              VerticalAlignment="Center">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="Auto" />
                                                                                <ColumnDefinition Width="*" MinWidth="0" />
                                                                            </Grid.ColumnDefinitions>

                                                                            <TextBlock Grid.Column="0"
                                                                                       Text="{Binding DisplayPathFileNameText}"
                                                                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                                                                       FontWeight="SemiBold"
                                                                                       TextTrimming="CharacterEllipsis"
                                                                                       TextWrapping="NoWrap"
                                                                                       VerticalAlignment="Center"
                                                                                       Margin="0,0,6,0" />

                                                                            <TextBlock Grid.Column="1"
                                                                                       Text="{Binding DisplayPathPrefixText}"
                                                                                       Foreground="{DynamicResource TextTertiaryBrush}"
                                                                                       TextTrimming="CharacterEllipsis"
                                                                                       TextWrapping="NoWrap"
                                                                                       VerticalAlignment="Center" />
                                                                        </Grid>

                                                                        <StackPanel Grid.Column="2"
                                                                                    Orientation="Horizontal"
                                                                                    VerticalAlignment="Center"
                                                                                    Margin="10,0,0,0">
                                                                            <Border x:Name="GitChangeStatusBadge"
                                                                                Grid.Column="0"
                                                                                MinWidth="30"
                                                                                Padding="6,3"
                                                                                CornerRadius="6"
                                                                                Background="Transparent"
                                                                                BorderBrush="Transparent"
                                                                                BorderThickness="0"
                                                                                Margin="0,0,8,0"
                                                                                VerticalAlignment="Center">
                                                                            <TextBlock x:Name="GitChangeStatusBadgeText"
                                                                                       Text="{Binding StatusBadgeText}"
                                                                                       FontFamily="Cascadia Code"
                                                                                       FontSize="11"
                                                                                       FontWeight="SemiBold"
                                                                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                                                                       HorizontalAlignment="Center"
                                                                                       VerticalAlignment="Center"
                                                                                       LineHeight="11" />
                                                                            </Border>
                                                                            <TextBlock Text="{Binding AddedLinesText}"
                                                                                       Visibility="{Binding AddedLinesVisibility}"
                                                                                       Foreground="{DynamicResource SuccessBrush}"
                                                                                       FontSize="11"
                                                                                       FontWeight="SemiBold"
                                                                                       Margin="0,0,8,0"
                                                                                       VerticalAlignment="Center"
                                                                                       LineHeight="11" />
                                                                            <TextBlock Text="{Binding RemovedLinesText}"
                                                                                       Visibility="{Binding RemovedLinesVisibility}"
                                                                                       Foreground="{DynamicResource DangerBrush}"
                                                                                       FontSize="11"
                                                                                       FontWeight="SemiBold"
                                                                                       VerticalAlignment="Center"
                                                                                       LineHeight="11" />
                                                                        </StackPanel>

                                                                        <Button x:Name="BtnGitChangeOpenInline"
                                                                                Grid.Column="3"
                                                                                Tag="{Binding}"
                                                                                ToolTip="Open file in VS Code"
                                                                                Margin="8,0,0,0"
                                                                                Padding="4"
                                                                                MinWidth="26"
                                                                                MinHeight="24"
                                                                                BorderThickness="0"
                                                                                Background="Transparent"
                                                                                Foreground="{DynamicResource TextTertiaryBrush}"
                                                                                VerticalAlignment="Center">
                                                                            <TextBlock Text="&#xE8A7;"
                                                                                       FontFamily="Segoe MDL2 Assets"
                                                                                       FontSize="12"
                                                                                       HorizontalAlignment="Center"
                                                                                       VerticalAlignment="Center"
                                                                                       LineHeight="12" />
                                                                        </Button>
                                                                    </Grid>
                                                                </Border>
                                                                <DataTemplate.Triggers>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="modified">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource WarningBrush}" />
                                                                        <Setter TargetName="GitChangeStatusBadgeText" Property="Foreground" Value="{DynamicResource WarningBrush}" />
                                                                        <Setter TargetName="GitChangeRowChrome" Property="BorderBrush" Value="{DynamicResource WarningBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="added">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource SuccessBrush}" />
                                                                        <Setter TargetName="GitChangeRowChrome" Property="BorderBrush" Value="{DynamicResource AccentGlowBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="deleted">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource DangerBrush}" />
                                                                        <Setter TargetName="GitChangeRowChrome" Property="BorderBrush" Value="{DynamicResource DangerBorderBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="renamed">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource WarningBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="copied">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource WarningBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="untracked">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource TextTertiaryBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="conflict">
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="Background" Value="Transparent" />
                                                                        <Setter TargetName="GitChangeStatusBadge" Property="BorderBrush" Value="{DynamicResource DangerBrush}" />
                                                                        <Setter TargetName="GitChangeRowChrome" Property="BorderBrush" Value="{DynamicResource DangerBrush}" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding StatusKind}" Value="deleted">
                                                                        <Setter TargetName="BtnGitChangeOpenInline" Property="Opacity" Value="0.55" />
                                                                    </DataTrigger>
                                                                </DataTemplate.Triggers>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListBox>
                                                </Border>

                                                <Thumb x:Name="GitChangesDiffRowSplitter"
                                                       Grid.Row="2"
                                                       Height="18"
                                                       Margin="0,2,0,0"
                                                       Panel.ZIndex="5"
                                                       HorizontalAlignment="Stretch"
                                                       VerticalAlignment="Stretch"
                                                       Background="Transparent"
                                                       Cursor="SizeNS"
                                                       ToolTip="Drag to resize working tree and diff preview">
                                                    <Thumb.Template>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Grid Background="Transparent">
                                                                <Border x:Name="SplitterLine"
                                                                        Height="1"
                                                                        Margin="10,0,10,2"
                                                                        CornerRadius="1"
                                                                        Background="{DynamicResource BorderStrongBrush}"
                                                                        Opacity="1"
                                                                        VerticalAlignment="Bottom" />
                                                                <Border x:Name="SplitterHandle"
                                                                        Width="54"
                                                                        Height="14"
                                                                        CornerRadius="7"
                                                                        Background="{DynamicResource SurfaceBrush}"
                                                                        BorderBrush="{DynamicResource BorderStrongBrush}"
                                                                        BorderThickness="1"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Bottom">
                                                                    <TextBlock Text="···"
                                                                               FontSize="11"
                                                                               FontWeight="SemiBold"
                                                                               Foreground="{DynamicResource TextTertiaryBrush}"
                                                                               HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center"
                                                                               Margin="0,-1,0,1" />
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="SplitterLine"
                                                                            Property="Background"
                                                                            Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle"
                                                                            Property="BorderBrush"
                                                                            Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle"
                                                                            Property="Background"
                                                                            Value="{DynamicResource SurfaceBrush}" />
                                                                </Trigger>
                                                                <Trigger Property="IsDragging" Value="True">
                                                                    <Setter TargetName="SplitterLine"
                                                                            Property="Background"
                                                                            Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle"
                                                                            Property="BorderBrush"
                                                                            Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle"
                                                                            Property="Background"
                                                                            Value="{DynamicResource AccentSubtleBrush}" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Thumb.Template>
                                                </Thumb>

                                                <Grid Grid.Row="3"
                                                      MinHeight="220">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" MinHeight="170" />
                                                    </Grid.RowDefinitions>

                                                    <DockPanel Grid.Row="0" LastChildFill="False">
                                                        <TextBlock x:Name="LblGitPanelDiffTitle"
                                                                   Text="Diff Preview"
                                                                   FontSize="11"
                                                                   FontWeight="SemiBold"
                                                                   Foreground="{DynamicResource TextSecondaryBrush}" />
                                                        <TextBlock x:Name="LblGitPanelDiffMeta"
                                                                   DockPanel.Dock="Right"
                                                                   Text=""
                                                                   FontSize="11"
                                                                   Foreground="{DynamicResource TextTertiaryBrush}" />
                                                    </DockPanel>

                                                    <Border Grid.Row="1"
                                                            MinHeight="170"
                                                            Margin="0,6,0,0"
                                                            Padding="6,6"
                                                            CornerRadius="10"
                                                            Background="{DynamicResource SurfaceBrush}"
                                                            BorderBrush="{DynamicResource BorderBrush}"
                                                            BorderThickness="1">
                                                        <ListBox x:Name="LstGitPanelDiffPreviewLines"
                                                                 BorderThickness="0"
                                                                 Background="Transparent"
                                                                 HorizontalContentAlignment="Left"
                                                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                                 ScrollViewer.CanContentScroll="False">
                                                            <ListBox.Resources>
                                                                <Style TargetType="ListBoxItem">
                                                                    <Setter Property="Padding" Value="0" />
                                                                    <Setter Property="Margin" Value="0" />
                                                                    <Setter Property="Background" Value="Transparent" />
                                                                    <Setter Property="BorderThickness" Value="0" />
                                                                    <Setter Property="Focusable" Value="False" />
                                                                    <Setter Property="HorizontalContentAlignment" Value="Left" />
                                                                </Style>
                                                            </ListBox.Resources>
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border x:Name="GitDiffLineRow"
                                                                            Margin="0,0,0,1"
                                                                            Padding="6,2"
                                                                            CornerRadius="5"
                                                                            Background="Transparent"
                                                                            BorderBrush="Transparent"
                                                                            BorderThickness="1">
                                                                        <TextBlock x:Name="GitDiffLineText"
                                                                                   Text="{Binding Text}"
                                                                                   FontFamily="Cascadia Code"
                                                                                   FontSize="11.5"
                                                                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                                                                   TextWrapping="NoWrap"
                                                                                   xml:space="preserve" />
                                                                    </Border>
                                                                    <DataTemplate.Triggers>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="fileHeader">
                                                                            <Setter TargetName="GitDiffLineRow" Property="Background" Value="{DynamicResource SurfaceMutedBrush}" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="BorderBrush" Value="{DynamicResource BorderStrongBrush}" />
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="pathHeader">
                                                                            <Setter TargetName="GitDiffLineRow" Property="Background" Value="{DynamicResource SurfaceMutedBrush}" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource TextSecondaryBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="hunk">
                                                                            <Setter TargetName="GitDiffLineRow" Property="Background" Value="{DynamicResource AccentSubtleBrush}" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="BorderBrush" Value="{DynamicResource AccentGlowBrush}" />
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource AccentBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="added">
                                                                            <Setter TargetName="GitDiffLineRow" Property="Background" Value="#182B9E68" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="BorderBrush" Value="#3656C58B" />
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource SuccessBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="removed">
                                                                            <Setter TargetName="GitDiffLineRow" Property="Background" Value="#1AAE4D4D" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="BorderBrush" Value="#3BD66D6D" />
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource DangerBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="meta">
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource TextTertiaryBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="note">
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource WarningBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding Kind}" Value="message">
                                                                            <Setter TargetName="GitDiffLineText" Property="Foreground" Value="{DynamicResource TextTertiaryBrush}" />
                                                                            <Setter TargetName="GitDiffLineRow" Property="Padding" Value="6,6" />
                                                                        </DataTrigger>
                                                                    </DataTemplate.Triggers>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </Border>
                                                </Grid>
                                            </Grid>

                                            <Grid x:Name="GitTabHistoryView" Visibility="Collapsed">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition x:Name="GitHistoryListRow" Height="150" MinHeight="110" />
                                                    <RowDefinition x:Name="GitHistoryDividerRow" Height="18" />
                                                    <RowDefinition x:Name="GitHistoryPreviewRow" Height="*" MinHeight="220" />
                                                </Grid.RowDefinitions>

                                                <TextBlock Grid.Row="0"
                                                           Text="Recent Commits"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />

                                                <Border Grid.Row="1"
                                                        MinHeight="110"
                                                        Margin="0,6,0,0"
                                                        Padding="2"
                                                        CornerRadius="10"
                                                        Background="{DynamicResource SurfaceBrush}"
                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                        BorderThickness="1">
                                                    <ListBox x:Name="LstGitPanelCommits"
                                                             BorderThickness="0"
                                                             Background="Transparent"
                                                             DisplayMemberPath="DisplayText"
                                                             HorizontalContentAlignment="Stretch"
                                                             ScrollViewer.VerticalScrollBarVisibility="Auto" />
                                                </Border>

                                                <Thumb x:Name="GitHistoryPreviewRowSplitter"
                                                       Grid.Row="2"
                                                       Height="18"
                                                       Margin="0,2,0,0"
                                                       Panel.ZIndex="5"
                                                       HorizontalAlignment="Stretch"
                                                       VerticalAlignment="Stretch"
                                                       Background="Transparent"
                                                       Cursor="SizeNS"
                                                       ToolTip="Drag to resize commit list and preview">
                                                    <Thumb.Template>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Grid Background="Transparent">
                                                                <Border x:Name="SplitterLine"
                                                                        Height="1"
                                                                        Margin="10,0,10,2"
                                                                        CornerRadius="1"
                                                                        Background="{DynamicResource BorderStrongBrush}"
                                                                        Opacity="1"
                                                                        VerticalAlignment="Bottom" />
                                                                <Border x:Name="SplitterHandle"
                                                                        Width="54"
                                                                        Height="14"
                                                                        CornerRadius="7"
                                                                        Background="{DynamicResource SurfaceBrush}"
                                                                        BorderBrush="{DynamicResource BorderStrongBrush}"
                                                                        BorderThickness="1"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Bottom">
                                                                    <TextBlock Text="···"
                                                                               FontSize="11"
                                                                               FontWeight="SemiBold"
                                                                               Foreground="{DynamicResource TextTertiaryBrush}"
                                                                               HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center"
                                                                               Margin="0,-1,0,1" />
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="BorderBrush" Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="Background" Value="{DynamicResource SurfaceBrush}" />
                                                                </Trigger>
                                                                <Trigger Property="IsDragging" Value="True">
                                                                    <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="BorderBrush" Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="Background" Value="{DynamicResource AccentSubtleBrush}" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Thumb.Template>
                                                </Thumb>

                                                <Grid Grid.Row="3" MinHeight="220">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" MinHeight="170" />
                                                    </Grid.RowDefinitions>

                                                    <TextBlock x:Name="LblGitPanelCommitPreviewTitle"
                                                               Grid.Row="0"
                                                               Text="Commit Preview"
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextSecondaryBrush}" />

                                                    <Border Grid.Row="1"
                                                            MinHeight="170"
                                                            Margin="0,6,0,0"
                                                            Padding="10,8"
                                                            CornerRadius="10"
                                                            Background="{DynamicResource SurfaceBrush}"
                                                            BorderBrush="{DynamicResource BorderBrush}"
                                                            BorderThickness="1">
                                                        <TextBox x:Name="TxtGitPanelCommitPreview"
                                                                 IsReadOnly="True"
                                                                 AcceptsReturn="True"
                                                                 TextWrapping="NoWrap"
                                                                 VerticalScrollBarVisibility="Auto"
                                                                 HorizontalScrollBarVisibility="Auto"
                                                                 BorderThickness="0"
                                                                 Background="Transparent"
                                                                 Foreground="{DynamicResource TextSecondaryBrush}"
                                                                 FontFamily="Cascadia Code"
                                                                 FontSize="11.5" />
                                                    </Border>
                                                </Grid>
                                            </Grid>

                                            <Grid x:Name="GitTabBranchesView" Visibility="Collapsed">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition x:Name="GitBranchesListRow" Height="150" MinHeight="110" />
                                                    <RowDefinition x:Name="GitBranchesDividerRow" Height="18" />
                                                    <RowDefinition x:Name="GitBranchesPreviewRow" Height="*" MinHeight="220" />
                                                </Grid.RowDefinitions>

                                                <TextBlock Grid.Row="0"
                                                           Text="Branches"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />

                                                <Border Grid.Row="1"
                                                        MinHeight="110"
                                                        Margin="0,6,0,0"
                                                        Padding="2"
                                                        CornerRadius="10"
                                                        Background="{DynamicResource SurfaceBrush}"
                                                        BorderBrush="{DynamicResource BorderBrush}"
                                                        BorderThickness="1">
                                                    <ListBox x:Name="LstGitPanelBranches"
                                                             BorderThickness="0"
                                                             Background="Transparent"
                                                             DisplayMemberPath="DisplayText"
                                                             HorizontalContentAlignment="Stretch"
                                                             ScrollViewer.VerticalScrollBarVisibility="Auto" />
                                                </Border>

                                                <Thumb x:Name="GitBranchesPreviewRowSplitter"
                                                       Grid.Row="2"
                                                       Height="18"
                                                       Margin="0,2,0,0"
                                                       Panel.ZIndex="5"
                                                       HorizontalAlignment="Stretch"
                                                       VerticalAlignment="Stretch"
                                                       Background="Transparent"
                                                       Cursor="SizeNS"
                                                       ToolTip="Drag to resize branch list and preview">
                                                    <Thumb.Template>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Grid Background="Transparent">
                                                                <Border x:Name="SplitterLine"
                                                                        Height="1"
                                                                        Margin="10,0,10,2"
                                                                        CornerRadius="1"
                                                                        Background="{DynamicResource BorderStrongBrush}"
                                                                        Opacity="1"
                                                                        VerticalAlignment="Bottom" />
                                                                <Border x:Name="SplitterHandle"
                                                                        Width="54"
                                                                        Height="14"
                                                                        CornerRadius="7"
                                                                        Background="{DynamicResource SurfaceBrush}"
                                                                        BorderBrush="{DynamicResource BorderStrongBrush}"
                                                                        BorderThickness="1"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Bottom">
                                                                    <TextBlock Text="···"
                                                                               FontSize="11"
                                                                               FontWeight="SemiBold"
                                                                               Foreground="{DynamicResource TextTertiaryBrush}"
                                                                               HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center"
                                                                               Margin="0,-1,0,1" />
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="BorderBrush" Value="{DynamicResource AccentGlowBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="Background" Value="{DynamicResource SurfaceBrush}" />
                                                                </Trigger>
                                                                <Trigger Property="IsDragging" Value="True">
                                                                    <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="BorderBrush" Value="{DynamicResource AccentBrush}" />
                                                                    <Setter TargetName="SplitterHandle" Property="Background" Value="{DynamicResource AccentSubtleBrush}" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Thumb.Template>
                                                </Thumb>

                                                <Grid Grid.Row="3" MinHeight="220">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" MinHeight="170" />
                                                    </Grid.RowDefinitions>

                                                    <TextBlock x:Name="LblGitPanelBranchPreviewTitle"
                                                               Grid.Row="0"
                                                               Text="Branch Preview"
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextSecondaryBrush}" />

                                                    <Border Grid.Row="1"
                                                            MinHeight="170"
                                                            Margin="0,6,0,0"
                                                            Padding="10,8"
                                                            CornerRadius="10"
                                                            Background="{DynamicResource SurfaceBrush}"
                                                            BorderBrush="{DynamicResource BorderBrush}"
                                                            BorderThickness="1">
                                                        <TextBox x:Name="TxtGitPanelBranchPreview"
                                                                 IsReadOnly="True"
                                                                 AcceptsReturn="True"
                                                                 TextWrapping="NoWrap"
                                                                 VerticalScrollBarVisibility="Auto"
                                                                 HorizontalScrollBarVisibility="Auto"
                                                                 BorderThickness="0"
                                                                 Background="Transparent"
                                                                 Foreground="{DynamicResource TextSecondaryBrush}"
                                                                 FontFamily="Cascadia Code"
                                                                 FontSize="11.5" />
                                                    </Border>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Border>
</UserControl>

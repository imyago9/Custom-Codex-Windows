<Window x:Class="CodexNativeAgent.Ui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="clr-namespace:CodexNativeAgent.Ui"
        Title="Codex Native Agent"
        Width="1540"
        Height="980"
        MinWidth="1200"
        MinHeight="760"
        WindowStartupLocation="CenterScreen"
        SnapsToDevicePixels="True"
        UseLayoutRounding="True"
        TextOptions.TextFormattingMode="Display"
        FontFamily="Segoe UI, Segoe UI Variable Text"
        Icon="pack://application:,,,/Assets/app-icon.ico"
        Background="{DynamicResource AppBackgroundBrush}">
    <Window.Resources>
        <Style x:Key="PaneColumnSplitterStyle" TargetType="GridSplitter">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Cursor" Value="SizeWE" />
            <Setter Property="ResizeDirection" Value="Columns" />
            <Setter Property="ResizeBehavior" Value="PreviousAndNext" />
            <Setter Property="ShowsPreview" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridSplitter">
                        <Grid Background="Transparent">
                            <Border x:Name="SplitterLine"
                                    Width="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Stretch"
                                    Background="{DynamicResource BorderBrush}"
                                    Opacity="0.6" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource BorderStrongBrush}" />
                                <Setter TargetName="SplitterLine" Property="Opacity" Value="0.95" />
                            </Trigger>
                            <Trigger Property="IsDragging" Value="True">
                                <Setter TargetName="SplitterLine" Property="Background" Value="{DynamicResource AccentBrush}" />
                                <Setter TargetName="SplitterLine" Property="Opacity" Value="1" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{DynamicResource AppShellBackgroundImageBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Border Grid.RowSpan="2"
                Background="{DynamicResource MainBackgroundGradient}"
                Opacity="0.72"
                IsHitTestVisible="False" />

        <Grid x:Name="MainSurfaceGrid" Grid.Row="0" Margin="{DynamicResource MainSurfaceMargin}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="LeftSidebarColumn" Width="472" MinWidth="368" />
                <ColumnDefinition x:Name="LeftSidebarSplitterColumn" Width="8" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition x:Name="RightGitPaneSplitterColumn" Width="0" />
                <ColumnDefinition x:Name="RightGitPaneColumn" Width="0" MinWidth="0" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0" ClipToBounds="True">
                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource AppShellBackgroundImageBrush}"
                        Opacity="0.9"
                        Effect="{DynamicResource SidebarBackdropBlurEffect}" />

                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource MainBackgroundGradient}"
                        Opacity="0.46" />

                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource SidebarBackgroundBrush}"
                        Opacity="0.34"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1" />

                <ui:SidebarPaneControl x:Name="SidebarPaneHost" />
            </Grid>
            <GridSplitter x:Name="LeftSidebarSplitter"
                          Grid.Column="1"
                          Width="8"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          Style="{StaticResource PaneColumnSplitterStyle}" />

            <ui:WorkspacePaneControl x:Name="WorkspacePaneHost" Grid.Column="2" />

            <GridSplitter x:Name="RightGitPaneSplitter"
                          Grid.Column="3"
                          Width="8"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          Style="{StaticResource PaneColumnSplitterStyle}"
                          Visibility="Collapsed" />

            <Grid x:Name="RightGitPaneShell"
                  Grid.Column="4"
                  Visibility="Collapsed"
                  ClipToBounds="True">
                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource AppShellBackgroundImageBrush}"
                        Opacity="0.9"
                        Effect="{DynamicResource SidebarBackdropBlurEffect}" />

                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource MainBackgroundGradient}"
                        Opacity="0.46" />

                <Border IsHitTestVisible="False"
                        CornerRadius="18"
                        Background="{DynamicResource SidebarBackgroundBrush}"
                        Opacity="0.28"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1" />

                <ui:GitPaneControl x:Name="GitPaneHost" />
            </Grid>

            <Border x:Name="ToastOverlay"
                    Grid.ColumnSpan="5"
                    Background="{DynamicResource ToastInfoBackgroundBrush}"
                    BorderBrush="{DynamicResource ToastInfoBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="11"
                    Padding="13,9"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="16"
                    Effect="{DynamicResource FloatingShadowEffect}"
                    Visibility="Collapsed">
                <DockPanel LastChildFill="True">
                    <Button x:Name="BtnToastClose"
                            DockPanel.Dock="Right"
                            Width="18"
                            Height="18"
                            MinWidth="18"
                            MinHeight="18"
                            Margin="8,0,0,0"
                            Padding="0"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            ToolTip="Dismiss">
                        <TextBlock Text="x"
                                   FontSize="11"
                                   Foreground="{DynamicResource TextTertiaryBrush}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />
                    </Button>
                    <TextBlock x:Name="LblToastText"
                               TextWrapping="Wrap"
                               MaxWidth="620"
                               VerticalAlignment="Center" />
                </DockPanel>
            </Border>
        </Grid>

        <Grid Grid.Row="1">
            <ui:StatusBarPaneControl x:Name="StatusBarPaneHost"
                                     Visibility="Collapsed" />

            <Button x:Name="BtnStatusBarToggle"
                    Width="20"
                    Height="18"
                    MinWidth="20"
                    MinHeight="18"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    Margin="8,0,0,4"
                    Padding="0"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    ToolTip="Show status bar">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Chrome"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                BorderThickness="1"
                                CornerRadius="7">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Chrome" Property="Background" Value="{DynamicResource AccentSubtleBrush}" />
                                <Setter TargetName="Chrome" Property="BorderBrush" Value="{DynamicResource BorderStrongBrush}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Chrome" Property="Background" Value="{DynamicResource ButtonPressedBrush}" />
                                <Setter TargetName="Chrome" Property="BorderBrush" Value="{DynamicResource BorderStrongBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Chrome" Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
                <TextBlock x:Name="TxtStatusBarToggleGlyph"
                           Text="&#xE70E;"
                           FontFamily="Segoe MDL2 Assets"
                           FontSize="10"
                           LineHeight="10"
                           LineStackingStrategy="BlockLineHeight"
                           TextAlignment="Center"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center" />
            </Button>
        </Grid>
    </Grid>
</Window>
